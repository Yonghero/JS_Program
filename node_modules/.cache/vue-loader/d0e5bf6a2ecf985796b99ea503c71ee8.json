{"remainingRequest":"/usr/local/lib/node_modules/@vue/cli-service-global/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhangyuxuan/repository/JS_Program/App.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zhangyuxuan/repository/JS_Program/App.vue","mtime":1627011517784},{"path":"/usr/local/lib/node_modules/@vue/cli-service-global/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/usr/local/lib/node_modules/@vue/cli-service-global/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/usr/local/lib/node_modules/@vue/cli-service-global/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2hvd09iajogewogICAgICAgIHllYXI6ICIiLAogICAgICAgIG1vbnRoOiAiIiwKICAgICAgICB3ZWVrOiAiIiwKICAgICAgICBkYXk6ICIiLAogICAgICB9LAogICAgICBkYXRlTGlzdDogW3sgdmFsdWU6ICIxIiwgaW52YWxpZDogZmFsc2UsIGlzVG9kYXk6IHRydWUsIGlzU2VsZWN0OiB0cnVlIH1dLAogICAgfTsKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLnNldFNob3dEYXRlKG5ldyBEYXRlKCkpOwogIH0sCiAgbWV0aG9kczogewogICAgLyoqCiAgICAgKiDml6XljobmoLjlv4PorqHnrpfmlrnms5UKICAgICAqLwogICAgX3NldERhdGUoKSB7CiAgICAgIGNvbnN0IHsgeWVhciwgbW9udGgsIGRheSB9ID0gdGhpcy5zaG93T2JqOwogICAgICBjb25zdCBEYXlPZk1pbGxpc2Vjb25kcyA9IDg2NDAwMDAwOyAvLyDkuIDlpKnmr6vnp5LmlbAKICAgICAgY29uc3QgX0RhdGUgPSBbXTsgLy8g6ZyA6KaB5riy5p+T5Yiw55WM6Z2i5LiK55qE5pel5pyf5a+56LGh6ZuG5ZCICiAgICAgIGNvbnN0IEZpcnN0V2VlayA9IG5ldyBEYXRlKHllYXIsIG1vbnRoKTsgLy8g5pys5pyI56ys5LiA5ZGoCiAgICAgIGNvbnN0IHN0YXJ0ID0KICAgICAgICBGaXJzdFdlZWsuZ2V0VGltZSgpIC0gRGF5T2ZNaWxsaXNlY29uZHMgKiBGaXJzdFdlZWsuZ2V0RGF5KCk7CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNDI7IGkrKykgewogICAgICAgIF9EYXRlLnB1c2gobmV3IERhdGUoc3RhcnQgKyBpICogRGF5T2ZNaWxsaXNlY29uZHMpKTsKICAgICAgfQogICAgICB0aGlzLmRhdGVMaXN0ID0gX0RhdGUubWFwKChkYXRlKSA9PiB7CiAgICAgICAgY29uc3QgX2RheSA9IGRhdGUuZ2V0RGF0ZSgpOwogICAgICAgIGNvbnN0IF9tb250aCA9IGRhdGUuZ2V0TW9udGgoKQogICAgICAgIGNvbnNvbGUubG9nKF9kYXkgPT09IGRheSAmJiBfbW9udGggIT09IG1vbnRoKTsKICAgICAgICByZXR1cm4gewogICAgICAgICAgdmFsdWU6IF9kYXksCiAgICAgICAgICBpbnZhbGlkOiBkYXRlLmdldE1vbnRoKCkgIT09IG1vbnRoLAogICAgICAgICAgaXNUb2RheTogX2RheSA9PT0gZGF5ICYmIF9tb250aCA9PT0gbW9udGgsCiAgICAgICAgICBpc1NlbGVjdDogX2RheSA9PT0gZGF5ICYmIF9tb250aCA9PT0gbW9udGgsCiAgICAgICAgICBkYXRlLAogICAgICAgIH07CiAgICAgIH0pOwogICAgfSwKICAgIGVtaXREYXRlKGRhdGUsIGluZGV4KSB7CiAgICAgIGNvbnNvbGUubG9nKGRhdGUpOwogICAgICB0aGlzLmRhdGVMaXN0LmZvckVhY2goKGRhdGUsIGRhdGVJbmRleCkgPT4gewogICAgICAgIGlmIChpbmRleCA9PT0gZGF0ZUluZGV4KSB7CiAgICAgICAgICBkYXRlLmlzU2VsZWN0ID0gdHJ1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZGF0ZS5pc1NlbGVjdCA9IGZhbHNlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgaGFuZGVsT3BlcmF0b3IoZSkgewogICAgICBjb25zdCBvcmlnaW5Eb20gPSBlLnRhcmdldDsKICAgICAgY29uc3QgY2xhc3NMaXN0ID0gQXJyYXkuZnJvbShvcmlnaW5Eb20uY2xhc3NMaXN0KTsKICAgICAgY29uc3QgeyB5ZWFyLCBtb250aCB9ID0gdGhpcy5zaG93T2JqOwogICAgICBsZXQgcmVZZWFyID0geWVhcixyZU1vbnRoID0gbW9udGgKCiAgICAgIGlmIChjbGFzc0xpc3QuaW5jbHVkZXMoInByZXYtbW9udGgiKSkgewogICAgICAgIHJlTW9udGggLT0gMQogICAgICB9CgogICAgICBpZiAoY2xhc3NMaXN0LmluY2x1ZGVzKCJwcmV2LXllYXIiKSkgewogICAgICAgIHJlWWVhciAtPSAxCiAgICAgIH0KCiAgICAgIGlmIChjbGFzc0xpc3QuaW5jbHVkZXMoIm5leHQtbW9udGgiKSkgewogICAgICAgIHJlTW9udGggKz0gMQogICAgICB9CgogICAgICBpZiAoY2xhc3NMaXN0LmluY2x1ZGVzKCJuZXh0LXllYXIiKSkgewogICAgICAgIHJlWWVhciArPSAxCiAgICAgIH0KICAgICAgdGhpcy5zZXRTaG93RGF0ZShuZXcgRGF0ZShyZVllYXIsIHJlTW9udGgpKTsKICAgICAgdGhpcy5fc2V0RGF0ZSgpCgogICAgfSwKICAgIHNldFNob3dEYXRlKGRhdGUpIHsKICAgICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZShkYXRlKTsKICAgICAgdGhpcy5zaG93T2JqID0gewogICAgICAgIHllYXI6IHRvZGF5LmdldEZ1bGxZZWFyKCksCiAgICAgICAgbW9udGg6IHRvZGF5LmdldE1vbnRoKCksCiAgICAgICAgd2VlazogdG9kYXkuZ2V0RGF5KCksCiAgICAgICAgZGF5OiB0b2RheS5nZXREYXRlKCksCiAgICAgIH07CiAgICB9LAogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuX3NldERhdGUoKTsKICB9LAp9Owo="},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"App.vue","sourceRoot":".","sourcesContent":["<template>\n  <div class=\"wrap\">\n    <div class=\"date-pick-header\">\n      <div class=\"pick-operator\" ref=\"operator\" @click=\"handelOperator\">\n        <div class=\"btn prev-year\" />\n        <div class=\"btn prev-month\"></div>\n        <span style=\"user-select: none;\">{{ this.showObj.year }}年{{ this.showObj.month + 1 }}月</span>\n        <div class=\"btn next-month\"></div>\n        <div class=\"btn next-year\"></div>\n      </div>\n      <div class=\"pick-weeks\">\n        <span>日</span>\n        <span>一</span>\n        <span>二</span>\n        <span>三</span>\n        <span>四</span>\n        <span>五</span>\n        <span>六</span>\n      </div>\n    </div>\n    <div class=\"date-pick-content\">\n      <div\n        v-for=\"(item, index) in dateList\"\n        @click=\"emitDate(item.date, index)\"\n        :key=\"index\"\n        :class=\"{\n          invalid: item.invalid,\n          today: item.isToday,\n          current: item.isSelect,\n        }\"\n      >\n        {{ item.value }}\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      showObj: {\n        year: \"\",\n        month: \"\",\n        week: \"\",\n        day: \"\",\n      },\n      dateList: [{ value: \"1\", invalid: false, isToday: true, isSelect: true }],\n    };\n  },\n  created() {\n    this.setShowDate(new Date());\n  },\n  methods: {\n    /**\n     * 日历核心计算方法\n     */\n    _setDate() {\n      const { year, month, day } = this.showObj;\n      const DayOfMilliseconds = 86400000; // 一天毫秒数\n      const _Date = []; // 需要渲染到界面上的日期对象集合\n      const FirstWeek = new Date(year, month); // 本月第一周\n      const start =\n        FirstWeek.getTime() - DayOfMilliseconds * FirstWeek.getDay();\n      for (let i = 0; i < 42; i++) {\n        _Date.push(new Date(start + i * DayOfMilliseconds));\n      }\n      this.dateList = _Date.map((date) => {\n        const _day = date.getDate();\n        const _month = date.getMonth()\n        console.log(_day === day && _month !== month);\n        return {\n          value: _day,\n          invalid: date.getMonth() !== month,\n          isToday: _day === day && _month === month,\n          isSelect: _day === day && _month === month,\n          date,\n        };\n      });\n    },\n    emitDate(date, index) {\n      console.log(date);\n      this.dateList.forEach((date, dateIndex) => {\n        if (index === dateIndex) {\n          date.isSelect = true;\n        } else {\n          date.isSelect = false;\n        }\n      });\n    },\n    handelOperator(e) {\n      const originDom = e.target;\n      const classList = Array.from(originDom.classList);\n      const { year, month } = this.showObj;\n      let reYear = year,reMonth = month\n\n      if (classList.includes(\"prev-month\")) {\n        reMonth -= 1\n      }\n\n      if (classList.includes(\"prev-year\")) {\n        reYear -= 1\n      }\n\n      if (classList.includes(\"next-month\")) {\n        reMonth += 1\n      }\n\n      if (classList.includes(\"next-year\")) {\n        reYear += 1\n      }\n      this.setShowDate(new Date(reYear, reMonth));\n      this._setDate()\n\n    },\n    setShowDate(date) {\n      const today = new Date(date);\n      this.showObj = {\n        year: today.getFullYear(),\n        month: today.getMonth(),\n        week: today.getDay(),\n        day: today.getDate(),\n      };\n    },\n  },\n  mounted() {\n    this._setDate();\n  },\n};\n</script>\n\n<style>\n.wrap {\n  width: 400px;\n  height: 400px;\n  color: #606266;\n  border: 1px solid #e4e7ed;\n  box-shadow: 0 2px 12px 0 rgb(0 0 0 / 10%);\n  background: #fff;\n  border-radius: 4px;\n  line-height: 30px;\n  margin: auto;\n}\n.date-pick-header {\n  width: 100%;\n  height: 100px;\n  border-bottom: 1px solid #ccc;\n  box-sizing: border-box;\n}\n.date-pick-content {\n  width: 100%;\n  height: 300px;\n}\n.btn {\n  width: 30px;\n  height: 30px;\n  line-height: 30px;\n  display: inline-block;\n  vertical-align: middle;\n  margin: 5px;\n  cursor: pointer;\n}\n.pick-operator {\n  height: 30px;\n  line-height: 30px;\n  text-align: center;\n}\n.prev-year {\n  background: url(\"./arrow.webp\");\n  background-size: 100% 100%;\n  transform: rotate(180deg);\n}\n.prev-month {\n  height: 25px;\n  width: 25px;\n  background: url(\"./arrow.webp\");\n  background-size: 100% 100%;\n  transform: rotate(180deg);\n}\n\n.prev-year {\n  background: url(\"./arrow.webp\");\n  background-size: 100% 100%;\n  transform: rotate(180deg);\n}\n.next-month {\n  height: 25px;\n  width: 25px;\n  background: url(\"./arrow.webp\");\n  background-size: 100% 100%;\n}\n\n.next-year {\n  background: url(\"./arrow.webp\");\n  background-size: 100% 100%;\n}\n\n.pick-weeks {\n  width: 100%;\n  height: 70px;\n  line-height: 70px;\n  text-align: center;\n  display: flex;\n}\n.pick-weeks span {\n  display: inline-block;\n  padding: 5px;\n  width: 45px;\n}\n.date-pick-content {\n  text-align: center;\n  color: #c0c4cc;\n}\n.date-pick-content div {\n  display: inline-block;\n  padding: 5px;\n  width: 45px;\n  height: 40px;\n  line-height: 40px;\n  border-radius: 50%;\n  user-select: none;\n  cursor: pointer;\n  color: darkblue;\n}\n.date-pick-content div.invalid {\n  color: #c0c4cc;\n}\n.date-pick-content div.current {\n  color: #fff !important;\n  background-color: #409eff;\n}\n.date-pick-content div.today {\n  color: #409eff;\n}\n</style>"]}]}